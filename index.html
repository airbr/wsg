<!doctype html>
<html class="no-js" lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Get a Guideline (WSG)</title>
  <meta name="description" content="A lightweight interactive website using the Web Sustainability Guidelines (WSGs)">
  <meta property="og:title" content="Open a WSG today">
  <meta property="og:description" content="A lightweight interactive website using the Web Sustainability Guidelines (WSGs)">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://wsg-o-matic.com/">
  <meta property="og:image" content="https://wsg-o-matic.com/img/android-chrome-192x192.png">
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="manifest" href="site.webmanifest">
  <meta name="theme-color" content="#fafafa">
  <link rel="stylesheet" href="css/styles.css">
</head>

<body>
  <nav class="header" aria-label="Main navigation">
    <h1>
      <a href="/"><strong>WSG-o-matic:</strong></a> a resource about sustainability. Randomness encouraged.
    </h1>
    <a href="#main-content" class="skip visually-hidden" aria-label="Skip to main content">Skip to main content</a>
    <noscript>
      <a href="https://w3c.github.io/sustainableweb-wsg/">No JavaScript is available. I suggest visiting the draft WSG's directly</a>
    </noscript>
  </nav>

  <div class="section">
    <button id="random-guideline" class="button" data-button-variant="main">Open Random Guideline</button>
  </div>

  <main id="main-content">
    <output id="output">
      <span id="package" style="cursor:pointer;">üì¶</span>
      <!-- Guideline is generated here -->
      <noscript>
        <a href="https://w3c.github.io/sustainableweb-wsg/">No JavaScript is available. I suggest visiting the WSG's directly</a>
      </noscript>
    </output>
  </main>

  <footer>
    <button id="go-back" class="button" data-button-variant="positive">‚Üê Back</button>
    <button id="go-forward" class="button" data-button-variant="positive">Forward ‚Üí</button>
  </footer>

  <aside>
    <details open class="about">
      <summary>More about this website and the draft Web Sustainability Guidelines (WSGs)</summary>
      This is an educational resource project <a href="https://github.com/airbr/wsg">demo made by Morgan Murrah</a>
      including the draft Web Sustainability Guidelines, making use of the JSON API. Click "Open Random Guideline" to get a draft guideline in full to display.
      <a href="https://w3c.github.io/sustainableweb-wsg/#acknowledgments">All credit to all the contributors</a>, this work is intended to help educate.
      <p><strong>Why: </strong>Improve digital sustainability so that the Web works better for all people and the planet. See the
        <a href="https://w3c.github.io/sustainableweb-wsg/">draft WSGs</a>.
      </p>
      <p><strong>What:</strong><a href="https://wsg-facts.netlify.app">See WSG Facts for facts about the WSGs</a>.</p>
    </details>
    <details class="categories">
      <summary id="topic-summary">Get a random WSG by topic</summary>
      <span><em>Scroll above after making a selection</em></span>
      <ul class="cluster" id="buttonlist">
        <li>Topics...</li>
        <!-- Topic List is generated here -->
      </ul>
    </details>
  </aside>

  <script src="js/app.js" defer></script>
  <script>
    // Helper for mobile scroll
    function mobileScroll() {
      if (window.matchMedia("(orientation: portrait)").matches) {
        document.getElementById('output').scrollIntoView({ behavior: "smooth", block: "start", inline: "nearest" });
      }
    }

    // Event listeners for navigation
    document.addEventListener('DOMContentLoaded', function () {
      // Open random guideline button
      document.getElementById('random-guideline').addEventListener('click', function () {
        getGuideline(getRandomInt(1, 5), true);
      });

      // Clickable package icon
      document.getElementById('package').addEventListener('click', function () {
        getGuideline(getRandomInt(1, 5), true);
      });

      // Topic summary click
      document.getElementById('topic-summary').addEventListener('click', function () {
        generateButtonList();
      });

      // Back/forward navigation
      document.getElementById("go-forward").addEventListener("click", () => {
        history.forward();
      });
      document.getElementById("go-back").addEventListener("click", () => {
        history.back();
      });

      // On load, check for URL param
      const url = new URL(window.location.href);
      const params = new URLSearchParams(url.search);
      if (params.has('url')) {
        getGuideline(getRandomInt(1, 5));
      }
    });
  </script>
</body>

</html>